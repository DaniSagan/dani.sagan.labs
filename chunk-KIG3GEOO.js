import{A as Mt,B as on,C as xe,D as me,E as an,F as ln,G as cn,H as hn,J as un,K as mn,L as dn,M as pn,N as fn,O as gn,P as vn,Q as _n,R as wn,S as Si,T as yn,U as xn,V as Di,W as bn,a as we,b as ye,c as oe,d as Xi,e as _i,f as wi,g as Gi,h as $i,i as yi,j as xi,k as Ji,l as ot,m as en,n as tn,o as nn,p as St,q as H,r as at,s as bi,t as G,u as sn,v as Ei,w as Dt,y as Ci,z as rn}from"./chunk-JOJYXF7S.js";import{a as bt,b as Et,c as Me,d as Wi,e as Bi,f as Qi,g as Zi,h as Yi,i as Ct,j as Ki}from"./chunk-Q3KAW73M.js";import{$ as Ni,A as b,B as E,C,E as h,F as Ee,G as ie,H as Ai,I as Ce,J as Se,K as De,L as y,M as vi,N as Ii,S as Li,V as Oi,W as yt,X as ji,Y as Vi,Z as zi,_ as rt,a as ue,aa as Hi,b as Fi,ba as qi,c as _t,ca as Ui,d as w,e as wt,fa as xt,g as p,h as f,i as J,j as se,k as v,l as Ri,m as re,o as X,q as fi,r as gi,s as c,t as l,u as g,v as Q,w as d}from"./chunk-BELQJ64D.js";var I=class{constructor(e){this._id=e.next()}toLatex(){return""}};var Te=class extends I{constructor(e,s,t){super(e),this._lhs=s,this._rhs=t}toLatex(){return`${this._lhs.toLatex()} = ${this._rhs.toLatex()}`}};var B=class{execute(e){}};var Tt=class extends B{execute(e){let s=e.pop(),t=e.pop();e.push(new Te(e.numberDispenser,t,s))}};var de=class extends I{constructor(e,s,t){super(e),this._base=s,this._exponent=t}toLatex(){return`{${this._base.toLatex()}}^{${this._exponent.toLatex()}}`}};var Pt=class extends B{execute(e){let s=e.pop(),t=e.pop();e.push(new de(e.numberDispenser,t,s))}};var kt=class{constructor(){this._storage=new Map}register(e,s){this._storage.set(e,s)}create(e){return new(this._storage.get(e))}};var Pe=class extends I{constructor(e,s,t){super(e),this._numerator=s,this._demoninator=t}toLatex(){return`\\frac{${this._numerator.toLatex()}}{${this._demoninator.toLatex()}}`}};var Ft=class extends B{execute(e){let s=e.pop(),t=e.pop();e.push(new Pe(e.numberDispenser,t,s))}};var Rt=class extends I{constructor(e,s){super(e),this._child=s}toLatex(){return`\\left(${this._child.toLatex()}\\right)`}};var At=class extends B{execute(e){let s=e.pop();e.push(new Rt(e.numberDispenser,s))}};var be=class extends I{constructor(e,s){super(e),this._value=s}toLatex(){return`${this._value}`}};var It=class extends B{execute(e){let s=e.pop();e.push(new de(e.numberDispenser,s,new be(e.numberDispenser,2)))}};var Lt=class extends I{constructor(e,s,t){super(e),this._lhs=s,this._rhs=t}toLatex(){return`${this._lhs.toLatex()} - ${this._rhs.toLatex()}`}};var Ot=class extends B{execute(e){let s=e.pop(),t=e.pop();e.push(new Lt(e.numberDispenser,t,s))}};var ke=class extends I{constructor(e,s,t){super(e),this._lhs=s,this._rhs=t}toLatex(){return`${this._lhs.toLatex()} + ${this._rhs.toLatex()}`}};var jt=class extends B{execute(e){let s=e.pop(),t=e.pop();e.push(new ke(e.numberDispenser,t,s))}};var Vt=class extends I{constructor(e,s){super(e),this._child=s}toLatex(){return`$ ${this._child.toLatex()} $`}};var zt=class extends I{constructor(e,s){super(e),this._value=s}toLatex(){return`${this._value}`}};var Nt=class{constructor(){this._id=0}next(){return this._id++,this._id}};var Ht=class{constructor(e){this._rootItem=null,this._numberDispenser=new Nt,this._stack=[],this._commandFactory=e}new(){return this._stack=[],this}int(e){return this._stack.push(new be(this._numberDispenser,e)),this}var(e){return this._stack.push(new zt(this._numberDispenser,e)),this}sum(e,s){let t=e(this).pop(),i=s(this).pop();return this._stack.push(new ke(this._numberDispenser,t,i)),this}equals(e,s){let t=e(this).pop(),i=s(this).pop();return this._stack.push(new Te(this._numberDispenser,t,i)),this}sqr(e){let s=e(this).pop();return this._stack.push(new de(this._numberDispenser,s,new be(this._numberDispenser,2))),this}frac(e,s){let t=e(this).pop(),i=s(this).pop();return this._stack.push(new Pe(this._numberDispenser,t,i)),this}exec(e){return new e().execute(this),this}do(e){return this._commandFactory.create(e).execute(this),this}build(){return new Vt(this._numberDispenser,this._stack[0])}pop(){return this._stack.pop()}push(e){this._stack.push(e)}get numberDispenser(){return this._numberDispenser}};var qt=class o{constructor(e,s){this.p1=e,this.p2=s}get direction(){return Me(this.p2,this.p1)}get length(){return this.direction.length}getPointAt(e){return Et(this.p1,Wi(this.direction,e))}getRotated(e,s){let t=Et(Me(this.p1,s).rotate(e),s),i=Et(Me(this.p2,s).rotate(e),s);return new o(t,i)}};var Ut=class extends Bi{constructor(e,s){super(),this.width=1,this.strokeStyle=null,this.line=new qt(e,s)}draw(e){e.beginPath(),e.lineWidth=this.width,this.strokeStyle&&(e.strokeStyle=this.strokeStyle),e.moveTo(this.line.p1.x,this.line.p1.y),e.lineTo(this.line.p2.x,this.line.p2.y),e.stroke(),e.closePath()}};var jn=["myCanvas"],pe=(()=>{let e=class e{constructor(){this.content="$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$",this.equations=new Map,this.canvasSize=new bt(490,490),this.commandFactory=new kt,this.commandFactory.register("+",jt),this.commandFactory.register("-",Ot),this.commandFactory.register("/",Ft),this.commandFactory.register("^",Pt),this.commandFactory.register("square",It),this.commandFactory.register("()",At),this.commandFactory.register("=",Tt),this.equationBuilder=new Ht(this.commandFactory),this.formula1=this.equationBuilder.new().int(2).int(3).do("+").build()}ngOnInit(){this.equations.set("test",this.equationBuilder.new().int(3).int(17).do("+").int(5).do("/").do("()").do("square").build().toLatex()),this.equations.set("pythagoras",this.equationBuilder.new().sqr(t=>t.var("a")).sqr(t=>t.var("b")).do("+").sqr(t=>t.var("c")).do("=").build().toLatex()),this.equations.set("pythagoras2",this.equationBuilder.new().equals(t=>t.sum(i=>i.sqr(n=>n.var("a")),i=>i.sqr(n=>n.var("b"))),t=>t.sqr(i=>i.var("c"))).build().toLatex()),this.equations.set("testfrac",this.equationBuilder.new().frac(t=>t.int(5),t=>t.int(3)).build().toLatex())}ngAfterViewInit(){this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.context!=null&&this.draw(this.context);let t=this.koch(new bt(10,200),new bt(480,200),7);this.myCanvas.scene.addItems(t),this.myCanvas.draw()}draw(t){t.beginPath(),t.moveTo(0,0),t.lineTo(300,150),t.stroke(),t.closePath()}koch(t,i,n){let r=[];if(n<=0)r.push(new Ut(t,i));else{let a=Me(i,t),u=t.sum(a.mult(1/3)),m=t.sum(a.mult(2/3)),_=t.sum(a.mult(1/3)).sum(a.rotate(-Math.PI/3).mult(1/3));r.push(...this.koch(t,u,n-1)),r.push(...this.koch(u,_,n-1)),r.push(...this.koch(_,m,n-1)),r.push(...this.koch(m,i,n-1))}return r}};e.title="Art\xEDculo Test",e.route="test-article",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-test-article"]],viewQuery:function(i,n){if(i&1&&b(jn,5),i&2){let r;E(r=C())&&(n.myCanvas=r.first)}},standalone:!0,features:[y],decls:14,vars:6,consts:[["myCanvas",""],[1,"formula",3,"mathjax"],[3,"formula"],["id","canvas","width","490","height","490",2,"border","1px solid black"],[3,"size"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Art\xEDculo test"),l(),c(2,"p"),h(3,"test-article works!"),l(),g(4,"div",1)(5,"div",1)(6,"div",1)(7,"div",1)(8,"app-formula",2)(9,"app-prime-decomposition")(10,"app-arithmetic-derivative")(11,"canvas",3)(12,"app-canvas",4,0)),i&2&&(v(4),X("mathjax",n.content),v(),X("mathjax",n.equations.get("test")),v(),X("mathjax",n.equations.get("pythagoras2")),v(),X("mathjax",n.equations.get("testfrac")),v(),X("formula",n.formula1),v(4),X("size",n.canvasSize))},dependencies:[yt,Oi,Zi,Yi,Ct,Qi],styles:[".formula[_ngcontent-%COMP%]{margin:5px;text-align:center}"]});let o=e;return o})();var Wt=class{};var Bt=class{};var Vn=["canvas"],Fe=(()=>{let e=class e{constructor(){this.iterations=0}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.drawSierpinski()}drawSierpinski(){let t=this.canvas.nativeElement.width,i=this.canvas.nativeElement.height;this.ctx.clearRect(0,0,t,i),this.ctx.strokeStyle="#00FFFF",this.ctx.shadowColor="#00FFFF",this.ctx.shadowBlur=5,this.ctx.fillStyle="#002222";let n={x:t/2,y:10},r={x:10,y:i-10},a={x:t-10,y:i-10};this.sierpinski(n,r,a,this.iterations)}sierpinski(t,i,n,r){if(r===0)this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(i.x,i.y),this.ctx.lineTo(n.x,n.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke();else{let a={x:(t.x+i.x)/2,y:(t.y+i.y)/2},u={x:(i.x+n.x)/2,y:(i.y+n.y)/2},m={x:(n.x+t.x)/2,y:(n.y+t.y)/2};this.sierpinski(t,a,m,r-1),this.sierpinski(a,i,u,r-1),this.sierpinski(m,u,n,r-1)}}incrementIterations(){this.iterations++,this.drawSierpinski()}decrementIterations(){this.iterations>0&&(this.iterations--,this.drawSierpinski())}};e.title="Tri\xE1ngulo de Sierpinski",e.route="sierpinski-triangle",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-sierpinski-triangle"]],viewQuery:function(i,n){if(i&1&&b(Vn,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:22,vars:1,consts:[["canvas",""],[1,"widget-container"],[1,"widget-title"],[3,"click"],[1,"widget-label"],["width","600","height","600"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Tri\xE1ngulo de Sierpinski"),l(),c(2,"p"),h(3,"El Tri\xE1ngulo de Sierpinski es uno de los fractales m\xE1s conocidos y representa un ejemplo cl\xE1sico de autosemejanza. Fue descrito por el matem\xE1tico polaco Wac\u0142aw Sierpi\u0144ski en 1915, y se genera dividiendo un tri\xE1ngulo equil\xE1tero en cuatro partes m\xE1s peque\xF1as, eliminando el tri\xE1ngulo central, y repitiendo este proceso de manera recursiva en los tri\xE1ngulos restantes. El resultado es una figura geom\xE9trica con un patr\xF3n repetitivo que se extiende indefinidamente en cada nivel de iteraci\xF3n."),l(),c(4,"p"),h(5,"Cada iteraci\xF3n sucesiva revela una mayor complejidad en la estructura del tri\xE1ngulo, exponiendo patrones m\xE1s detallados y reduciendo el \xE1rea total de la figura, lo que convierte al Tri\xE1ngulo de Sierpinski en un fractal con dimensi\xF3n no entera, m\xE1s espec\xEDficamente, de dimensi\xF3n fractal cercana a 1,585. Esto significa que, aunque el tri\xE1ngulo parece una figura bidimensional, su \xE1rea disminuye con cada iteraci\xF3n mientras su per\xEDmetro sigue creciendo."),l(),c(6,"p"),h(7,"Este fractal se utiliza con frecuencia para ense\xF1ar conceptos de geometr\xEDa fractal, recursi\xF3n y patrones matem\xE1ticos, y es visualmente fascinante debido a su estructura sim\xE9trica y repetitiva."),l(),c(8,"p"),h(9,"Debajo, puedes visualizar el Tri\xE1ngulo de Sierpinski con un componente interactivo, donde podr\xE1s controlar el n\xFAmero de iteraciones, increment\xE1ndolo o disminuy\xE9ndolo para observar c\xF3mo se genera el fractal a distintos niveles de detalle."),l(),c(10,"div",1)(11,"div",2),h(12,"Tri\xE1ngulo de Sierpinski"),l(),c(13,"div")(14,"button",3),d("click",function(){return p(r),f(n.decrementIterations())}),h(15,"Decrementar Iteraciones"),l(),c(16,"div",4),h(17),l(),c(18,"button",3),d("click",function(){return p(r),f(n.incrementIterations())}),h(19,"Incrementar Iteraciones"),l()(),g(20,"canvas",5,0),l()}i&2&&(v(17),ie("",n.iterations," iteraciones."))},styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;background-color:#000;display:block;margin-top:20px}"]});let o=e;return o})();var zn=["canvas"],Re=(()=>{let e=class e{constructor(){this.iterations=0}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.drawSierpinskiCarpet()}drawSierpinskiCarpet(){let t=this.canvas.nativeElement.width,i=this.canvas.nativeElement.height;this.ctx.clearRect(0,0,t,i),this.ctx.strokeStyle="#00FFFF",this.ctx.fillStyle="#002222",this.ctx.shadowColor="#00FFFF",this.ctx.shadowBlur=5,this.drawSquare(0,0,t,this.iterations)}drawSquare(t,i,n,r){if(r===0)this.ctx.beginPath(),this.ctx.rect(t,i,n,n),this.ctx.fill(),this.ctx.stroke();else{let a=n/3;for(let u=0;u<3;u++)for(let m=0;m<3;m++)u===1&&m===1||this.drawSquare(t+u*a,i+m*a,a,r-1)}}incrementIterations(){this.iterations++,this.drawSierpinskiCarpet()}decrementIterations(){this.iterations>0&&(this.iterations--,this.drawSierpinskiCarpet())}};e.title="Alfombra de Sierpinski",e.route="sierpinski-carpet",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-sierpinski-carpet"]],viewQuery:function(i,n){if(i&1&&b(zn,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:22,vars:1,consts:[["canvas",""],[1,"widget-container"],[1,"widget-title"],[3,"click"],[1,"widget-label"],["width","600","height","600"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Alfombra de Sierpinski"),l(),c(2,"p"),h(3,"La Alfombra de Sierpinski es un fractal que extiende el concepto del Tri\xE1ngulo de Sierpinski a dos dimensiones, generando una estructura m\xE1s compleja y rica en simetr\xEDa. Fue descrita por el matem\xE1tico polaco Wac\u0142aw Sierpi\u0144ski en 1916 y se obtiene dividiendo un cuadrado en nueve subcuadrados de igual tama\xF1o, eliminando el cuadrado central y repitiendo este proceso de manera recursiva en los subcuadrados restantes."),l(),c(4,"p"),h(5,"Con cada iteraci\xF3n, se generan m\xE1s huecos en la estructura, formando patrones geom\xE9tricos que presentan autosemejanza: cualquier parte de la alfombra es una versi\xF3n reducida de la totalidad de la figura. Al igual que otros fractales, la Alfombra de Sierpinski tiene una dimensi\xF3n fractal, que en este caso es aproximadamente 1,8928, lo que significa que aunque la figura ocupa dos dimensiones, su \xE1rea total disminuye con cada iteraci\xF3n, mientras que su per\xEDmetro crece indefinidamente."),l(),c(6,"p"),h(7,"Este fractal es un ejemplo ideal para estudiar conceptos de recursi\xF3n, geometr\xEDa fractal y la idea de infinito en matem\xE1ticas. Su apariencia visual, con patrones repetitivos y simetr\xEDa, lo hace fascinante tanto desde el punto de vista matem\xE1tico como est\xE9tico."),l(),c(8,"p"),h(9,"Debajo de este art\xEDculo, puedes visualizar la Alfombra de Sierpinski mediante un componente interactivo. Los controles permiten aumentar o disminuir el n\xFAmero de iteraciones para explorar los distintos niveles de detalle del fractal."),l(),c(10,"div",1)(11,"div",2),h(12,"Alfombra de Sierpinski"),l(),c(13,"div")(14,"button",3),d("click",function(){return p(r),f(n.decrementIterations())}),h(15,"Decrementar Iteraciones"),l(),c(16,"div",4),h(17),l(),c(18,"button",3),d("click",function(){return p(r),f(n.incrementIterations())}),h(19,"Incrementar Iteraciones"),l()(),g(20,"canvas",5,0),l()}i&2&&(v(17),ie("",n.iterations," iteraciones"))},styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;background-color:#000;display:block;margin-top:20px}button[_ngcontent-%COMP%]{margin:5px;padding:10px;background-color:#444;color:#fff;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#666}"]});let o=e;return o})();var Nn=["canvas"],Ae=(()=>{let e=class e{constructor(){this.iterations=5e3,this.isDrawing=!1}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.drawBarnsleyFern()}drawBarnsleyFern(){return ue(this,null,function*(){let t=this.canvas.nativeElement.width,i=this.canvas.nativeElement.height;this.ctx.clearRect(0,0,t,i),this.ctx.fillStyle="#00FF00",this.ctx.shadowColor="#00FF00",this.ctx.shadowBlur=5;let n=0,r=0;this.isDrawing=!0;for(let a=0;a<this.iterations&&this.isDrawing;a++){let u=this.computeNextPoint(n,r);n=u[0],r=u[1];let m=Math.round(t/2+n*t/10),_=Math.round(i-r*i/12);this.ctx.fillRect(m,_,1,1),a%100===0&&(yield this.sleep(0))}this.isDrawing=!1})}computeNextPoint(t,i){let n=Math.random(),r,a;return n<.01?(r=0,a=.16*i):n<.86?(r=.85*t+.04*i,a=-.04*t+.85*i+1.6):n<.93?(r=.2*t-.26*i,a=.23*t+.22*i+1.6):(r=-.15*t+.28*i,a=.26*t+.24*i+.44),[r,a]}incrementIterations(){this.iterations+=5e3,this.isDrawing||this.drawBarnsleyFern()}decrementIterations(){this.iterations>5e3&&(this.iterations-=5e3,this.isDrawing||this.drawBarnsleyFern())}stopDrawing(){this.isDrawing=!1}sleep(t){return new Promise(i=>setTimeout(i,t))}};e.title="Helecho de Barnsley",e.route="barnsley-fern",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-barnsley-fern"]],viewQuery:function(i,n){if(i&1&&b(Nn,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:24,vars:1,consts:[["canvas",""],[1,"widget-container"],[1,"widget-title"],[1,"widget-label"],[3,"click"],["width","600","height","800"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Helecho de Barnsley"),l(),c(2,"p"),h(3,"El Helecho de Barnsley es un fractal generado mediante un conjunto de funciones iteradas que simulan la estructura natural de un helecho. Fue ideado por el matem\xE1tico brit\xE1nico Michael Barnsley en la d\xE9cada de 1980 y es famoso por su capacidad para representar formas org\xE1nicas con gran precisi\xF3n utilizando reglas matem\xE1ticas simples. A trav\xE9s de transformaciones geom\xE9tricas aplicadas repetidamente, el fractal genera una estructura autosemejante, lo que significa que peque\xF1as partes del helecho se parecen a la forma completa."),l(),c(4,"p"),h(5,"El proceso de construcci\xF3n del Helecho de Barnsley involucra cuatro transformaciones afines, cada una de las cuales se aplica probabil\xEDsticamente. Una de las transformaciones define el tallo, mientras que las otras tres crean las hojas del helecho. El resultado es una representaci\xF3n geom\xE9trica sorprendentemente realista de un helecho natural, demostrando c\xF3mo las matem\xE1ticas pueden capturar patrones complejos encontrados en la naturaleza."),l(),c(6,"p"),h(7,"Este fractal es un excelente ejemplo de c\xF3mo las matem\xE1ticas pueden modelar estructuras org\xE1nicas y ca\xF3ticas. Adem\xE1s, su creaci\xF3n mediante iteraci\xF3n lo convierte en un caso fascinante para explorar los conceptos de geometr\xEDa fractal, caos y sistemas din\xE1micos."),l(),c(8,"p"),h(9,"Debajo de este art\xEDculo, puedes visualizar el Helecho de Barnsley utilizando un componente interactivo. Los controles te permitir\xE1n ajustar el n\xFAmero de iteraciones, explorando c\xF3mo el fractal se forma a trav\xE9s de cada nivel de detalle."),l(),c(10,"div",1)(11,"div",2),h(12,"Helecho de Barnsley"),l(),c(13,"div")(14,"div",3),h(15),l(),c(16,"button",4),d("click",function(){return p(r),f(n.decrementIterations())}),h(17,"Decrementar Iteraciones"),l(),c(18,"button",4),d("click",function(){return p(r),f(n.incrementIterations())}),h(19,"Incrementar Iteraciones"),l(),c(20,"button",4),d("click",function(){return p(r),f(n.stopDrawing())}),h(21,"Detener Dibujo"),l()(),g(22,"canvas",5,0),l()}i&2&&(v(15),ie("",n.iterations," iteraciones"))},styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;background-color:#000;display:block;margin-top:20px}button[_ngcontent-%COMP%]{margin:5px;padding:10px;background-color:#444;color:#fff;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#666}"]});let o=e;return o})();var Ie=class o{constructor(e,s){this.x=e,this.y=s}add(e){return new o(this.x+e.x,this.y+e.y)}};var Hn=["canvas"],Le=(()=>{let e=class e{constructor(){this.iterations=10,this.isDrawing=!1,this.lineLength=5}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.drawDragonCurve()}drawDragonCurve(){return ue(this,null,function*(){let t=this.canvas.nativeElement.width,i=this.canvas.nativeElement.height;this.ctx.clearRect(0,0,t,i),this.ctx.rect(0,0,t,i),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#00FFFF",this.ctx.shadowColor="#00FFFF",this.ctx.shadowBlur=1,this.ctx.lineWidth=1;let n=t/2,r=i/2,a=new Ie(this.lineLength,0);this.isDrawing=!0;let u=this.generateDragonSequence(this.iterations),m=0,_=u.length;for(let M of u){if(!this.isDrawing)break;a=M==="L"?this.rotateLeft(a):this.rotateRight(a),this.ctx.beginPath(),this.ctx.moveTo(n,r),n+=a.x,r+=a.y;let V=this.decimalToRainbowColor(m/_);this.ctx.strokeStyle=V,this.ctx.shadowColor=V,this.ctx.lineTo(n,r),this.ctx.stroke(),m%100==0&&(yield this.sleep(1)),m++}this.isDrawing=!1})}generateDragonSequence(t){let i=["L"];for(let n=1;n<t;n++){let r=[...i].reverse().map(a=>a==="L"?"R":"L");i.push("L",...r)}return i}incrementIterations(){this.iterations++,this.isDrawing||this.drawDragonCurve()}decrementIterations(){this.iterations>0&&(this.iterations--,this.isDrawing||this.drawDragonCurve())}incrementLineLength(){this.lineLength++,this.isDrawing||this.drawDragonCurve()}decrementLineLength(){this.lineLength>1&&(this.lineLength--,this.isDrawing||this.drawDragonCurve())}stopDrawing(){this.isDrawing=!1}sleep(t){return new Promise(i=>setTimeout(i,t))}rotateLeft(t){return new Ie(-t.y,t.x)}rotateRight(t){return new Ie(t.y,-t.x)}decimalToRainbowColor(t){t=Math.max(0,Math.min(1,t));let i=t*360;return this.hslToHex(i,100,50)}hslToHex(t,i,n){i/=100,n/=100;let r=m=>(m+t/30)%12,a=i*Math.min(n,1-n),u=m=>Math.round(255*(n-a*Math.max(-1,Math.min(r(m)-3,Math.min(9-r(m),1)))));return`#${u(0).toString(16).padStart(2,"0")}${u(8).toString(16).padStart(2,"0")}${u(4).toString(16).padStart(2,"0")}`}};e.title="Curva del Drag\xF3n",e.route="dragon-curve",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-dragon-curve"]],viewQuery:function(i,n){if(i&1&&b(Hn,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:31,vars:2,consts:[["canvas",""],[1,"widget-container"],[1,"widget-title"],[3,"click"],[1,"widget-label"],["width","800","height","600"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Curva de Drag\xF3n"),l(),c(2,"p"),h(3,"La Curva del Drag\xF3n es un fractal que se genera mediante un proceso iterativo de plegado de una l\xEDnea. Descubierta por John Heighway y popularizada por la famosa obra de Martin Gardner en la revista Scientific American, esta curva tiene la propiedad de ser autosemejante, lo que significa que cualquier parte de la curva es una versi\xF3n reducida de la totalidad de la misma."),l(),c(4,"p"),h(5,"El proceso para generar la Curva del Drag\xF3n comienza con una simple l\xEDnea recta. En cada iteraci\xF3n, se pliega la curva sobre s\xED misma siguiendo una secuencia espec\xEDfica de giros de 90 grados. A medida que se repiten las iteraciones, la curva se vuelve cada vez m\xE1s compleja, adquiriendo su caracter\xEDstica apariencia de drag\xF3n. Lo interesante de este fractal es que, aunque sigue reglas simples, produce una figura sorprendentemente compleja y est\xE9tica, que adem\xE1s tiene aplicaciones en la compresi\xF3n de datos y la generaci\xF3n de gr\xE1ficos computacionales."),l(),c(6,"p"),h(7,"La Curva del Drag\xF3n es tambi\xE9n conocida por su forma autosimilar y por tener una dimensi\xF3n fractal superior a 1, lo que significa que aunque parece una curva unidimensional, su complejidad la acerca a un objeto bidimensional."),l(),c(8,"p"),h(9,"Debajo, puedes visualizar la Curva del Drag\xF3n con un componente interactivo, donde puedes controlar el n\xFAmero de iteraciones para observar c\xF3mo evoluciona este fascinante fractal en cada nivel."),l(),c(10,"div",1)(11,"div",2),h(12,"Curva del Drag\xF3n"),l(),c(13,"div")(14,"button",3),d("click",function(){return p(r),f(n.decrementIterations())}),h(15,"Decrementar Iteraciones"),l(),c(16,"div",4),h(17),l(),c(18,"button",3),d("click",function(){return p(r),f(n.incrementIterations())}),h(19,"Incrementar Iteraciones"),l(),c(20,"button",3),d("click",function(){return p(r),f(n.stopDrawing())}),h(21,"Detener Dibujo"),l()(),c(22,"div")(23,"button",3),d("click",function(){return p(r),f(n.decrementLineLength())}),h(24,"Disminuir longitud de l\xEDnea"),l(),c(25,"div",4),h(26),l(),c(27,"button",3),d("click",function(){return p(r),f(n.incrementLineLength())}),h(28,"Incrementar longitud de l\xEDnea"),l()(),g(29,"canvas",5,0),l()}i&2&&(v(17),ie("",n.iterations," iteraciones"),v(9),ie("longitud de l\xEDnea: ",n.lineLength,""))},styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;background-color:#000;display:block;margin-top:20px}button[_ngcontent-%COMP%]{margin:5px;padding:10px;background-color:#444;color:#fff;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#666}"]});let o=e;return o})();var En={type:"change"},Ti={type:"start"},Sn={type:"end"},Qt=new sn,Cn=new ln,qn=Math.cos(70*St.DEG2RAD),j=new G,Z=2*Math.PI,x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Mi=1e-6,Zt=class extends bn{constructor(e,s=null){super(e,s),this.state=x.NONE,this.enabled=!0,this.target=new G,this.cursor=new G,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:we.ROTATE,MIDDLE:we.DOLLY,RIGHT:we.PAN},this.touches={ONE:ye.ROTATE,TWO:ye.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new G,this._lastQuaternion=new bi,this._lastTargetPosition=new G,this._quat=new bi().setFromUnitVectors(e.up,new G(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Di,this._sphericalDelta=new Di,this._scale=1,this._panOffset=new G,this._rotateStart=new H,this._rotateEnd=new H,this._rotateDelta=new H,this._panStart=new H,this._panEnd=new H,this._panDelta=new H,this._dollyStart=new H,this._dollyEnd=new H,this._dollyDelta=new H,this._dollyDirection=new G,this._mouse=new H,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Wn.bind(this),this._onPointerDown=Un.bind(this),this._onPointerUp=Bn.bind(this),this._onContextMenu=$n.bind(this),this._onMouseWheel=Yn.bind(this),this._onKeyDown=Kn.bind(this),this._onTouchStart=Xn.bind(this),this._onTouchMove=Gn.bind(this),this._onMouseDown=Qn.bind(this),this._onMouseMove=Zn.bind(this),this._interceptControlDown=Jn.bind(this),this._interceptControlUp=es.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(En),this.update(),this.state=x.NONE}update(e=null){let s=this.object.position;j.copy(s).sub(this.target),j.applyQuaternion(this._quat),this._spherical.setFromVector3(j),this.autoRotate&&this.state===x.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let t=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(t)&&isFinite(i)&&(t<-Math.PI?t+=Z:t>Math.PI&&(t-=Z),i<-Math.PI?i+=Z:i>Math.PI&&(i-=Z),t<=i?this._spherical.theta=Math.max(t,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(t+i)/2?Math.max(t,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let n=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let r=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),n=r!=this._spherical.radius}if(j.setFromSpherical(this._spherical),j.applyQuaternion(this._quatInverse),s.copy(this.target).add(j),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let r=null;if(this.object.isPerspectiveCamera){let a=j.length();r=this._clampDistance(a*this._scale);let u=a-r;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),n=!!u}else if(this.object.isOrthographicCamera){let a=new G(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),n=u!==this.object.zoom;let m=new G(this._mouse.x,this._mouse.y,0);m.unproject(this.object),this.object.position.sub(m).add(a),this.object.updateMatrixWorld(),r=j.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;r!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(r).add(this.object.position):(Qt.origin.copy(this.object.position),Qt.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Qt.direction))<qn?this.object.lookAt(this.target):(Cn.setFromNormalAndCoplanarPoint(this.object.up,this.target),Qt.intersectPlane(Cn,this.target))))}else if(this.object.isOrthographicCamera){let r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),r!==this.object.zoom&&(this.object.updateProjectionMatrix(),n=!0)}return this._scale=1,this._performCursorZoom=!1,n||this._lastPosition.distanceToSquared(this.object.position)>Mi||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Mi||this._lastTargetPosition.distanceToSquared(this.target)>Mi?(this.dispatchEvent(En),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Z/60*this.autoRotateSpeed*e:Z/60/60*this.autoRotateSpeed}_getZoomScale(e){let s=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*s)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,s){j.setFromMatrixColumn(s,0),j.multiplyScalar(-e),this._panOffset.add(j)}_panUp(e,s){this.screenSpacePanning===!0?j.setFromMatrixColumn(s,1):(j.setFromMatrixColumn(s,0),j.crossVectors(this.object.up,j)),j.multiplyScalar(e),this._panOffset.add(j)}_pan(e,s){let t=this.domElement;if(this.object.isPerspectiveCamera){let i=this.object.position;j.copy(i).sub(this.target);let n=j.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*n/t.clientHeight,this.object.matrix),this._panUp(2*s*n/t.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/t.clientWidth,this.object.matrix),this._panUp(s*(this.object.top-this.object.bottom)/this.object.zoom/t.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,s){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let t=this.domElement.getBoundingClientRect(),i=e-t.left,n=s-t.top,r=t.width,a=t.height;this._mouse.x=i/r*2-1,this._mouse.y=-(n/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let s=this.domElement;this._rotateLeft(Z*this._rotateDelta.x/s.clientHeight),this._rotateUp(Z*this._rotateDelta.y/s.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let s=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(Z*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),s=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-Z*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),s=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(Z*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),s=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-Z*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),s=!0;break}s&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let s=this._getSecondPointerPosition(e),t=.5*(e.pageX+s.x),i=.5*(e.pageY+s.y);this._rotateStart.set(t,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let s=this._getSecondPointerPosition(e),t=.5*(e.pageX+s.x),i=.5*(e.pageY+s.y);this._panStart.set(t,i)}}_handleTouchStartDolly(e){let s=this._getSecondPointerPosition(e),t=e.pageX-s.x,i=e.pageY-s.y,n=Math.sqrt(t*t+i*i);this._dollyStart.set(0,n)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this._rotateEnd.set(i,n)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let s=this.domElement;this._rotateLeft(Z*this._rotateDelta.x/s.clientHeight),this._rotateUp(Z*this._rotateDelta.y/s.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let s=this._getSecondPointerPosition(e),t=.5*(e.pageX+s.x),i=.5*(e.pageY+s.y);this._panEnd.set(t,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let s=this._getSecondPointerPosition(e),t=e.pageX-s.x,i=e.pageY-s.y,n=Math.sqrt(t*t+i*i);this._dollyEnd.set(0,n),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let r=(e.pageX+s.x)*.5,a=(e.pageY+s.y)*.5;this._updateZoomParameters(r,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let s=0;s<this._pointers.length;s++)if(this._pointers[s]==e.pointerId){this._pointers.splice(s,1);return}}_isTrackingPointer(e){for(let s=0;s<this._pointers.length;s++)if(this._pointers[s]==e.pointerId)return!0;return!1}_trackPointer(e){let s=this._pointerPositions[e.pointerId];s===void 0&&(s=new H,this._pointerPositions[e.pointerId]=s),s.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let s=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[s]}_customWheelEvent(e){let s=e.deltaMode,t={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(s){case 1:t.deltaY*=16;break;case 2:t.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(t.deltaY*=10),t}};function Un(o){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(o.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(o)&&(this._addPointer(o),o.pointerType==="touch"?this._onTouchStart(o):this._onMouseDown(o)))}function Wn(o){this.enabled!==!1&&(o.pointerType==="touch"?this._onTouchMove(o):this._onMouseMove(o))}function Bn(o){switch(this._removePointer(o),this._pointers.length){case 0:this.domElement.releasePointerCapture(o.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Sn),this.state=x.NONE;break;case 1:let e=this._pointers[0],s=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:s.x,pageY:s.y});break}}function Qn(o){let e;switch(o.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case we.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(o),this.state=x.DOLLY;break;case we.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=x.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=x.ROTATE}break;case we.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=x.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=x.PAN}break;default:this.state=x.NONE}this.state!==x.NONE&&this.dispatchEvent(Ti)}function Zn(o){switch(this.state){case x.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(o);break;case x.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(o);break;case x.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(o);break}}function Yn(o){this.enabled===!1||this.enableZoom===!1||this.state!==x.NONE||(o.preventDefault(),this.dispatchEvent(Ti),this._handleMouseWheel(this._customWheelEvent(o)),this.dispatchEvent(Sn))}function Kn(o){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(o)}function Xn(o){switch(this._trackPointer(o),this._pointers.length){case 1:switch(this.touches.ONE){case ye.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(o),this.state=x.TOUCH_ROTATE;break;case ye.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(o),this.state=x.TOUCH_PAN;break;default:this.state=x.NONE}break;case 2:switch(this.touches.TWO){case ye.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(o),this.state=x.TOUCH_DOLLY_PAN;break;case ye.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(o),this.state=x.TOUCH_DOLLY_ROTATE;break;default:this.state=x.NONE}break;default:this.state=x.NONE}this.state!==x.NONE&&this.dispatchEvent(Ti)}function Gn(o){switch(this._trackPointer(o),this.state){case x.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(o),this.update();break;case x.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(o),this.update();break;case x.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(o),this.update();break;case x.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(o),this.update();break;default:this.state=x.NONE}}function $n(o){this.enabled!==!1&&o.preventDefault()}function Jn(o){o.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function es(o){o.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Oe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var ne=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},ts=new cn(-1,1,1,-1,0,1),Pi=class extends rn{constructor(){super(),this.setAttribute("position",new Ci([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ci([0,2,0,0,2,0],2))}},is=new Pi,je=class{constructor(e){this._mesh=new Mt(is,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ts)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var Yt=class extends ne{constructor(e,s){super(),this.textureID=s!==void 0?s:"tDiffuse",e instanceof me?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=xe.clone(e.uniforms),this.material=new me({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new je(this.material)}render(e,s,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(s),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var lt=class extends ne{constructor(e,s){super(),this.scene=e,this.camera=s,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,s,t){let i=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let r,a;this.inverse?(r=0,a=1):(r=1,a=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),n.buffers.stencil.setFunc(i.ALWAYS,r,4294967295),n.buffers.stencil.setClear(a),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(i.EQUAL,1,4294967295),n.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),n.buffers.stencil.setLocked(!0)}},Kt=class extends ne{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var Xt=class{constructor(e,s){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),s===void 0){let t=e.getSize(new H);this._width=t.width,this._height=t.height,s=new at(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:ot}),s.texture.name="EffectComposer.rt1"}else this._width=s.width,this._height=s.height;this.renderTarget1=s,this.renderTarget2=s.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Yt(Oe),this.copyPass.material.blending=oe,this.clock=new xn}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,s){this.passes.splice(s,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let s=this.passes.indexOf(e);s!==-1&&this.passes.splice(s,1)}isLastEnabledPass(e){for(let s=e+1;s<this.passes.length;s++)if(this.passes[s].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let s=this.renderer.getRenderTarget(),t=!1;for(let i=0,n=this.passes.length;i<n;i++){let r=this.passes[i];if(r.enabled!==!1){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),r.needsSwap){if(t){let a=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}lt!==void 0&&(r instanceof lt?t=!0:r instanceof Kt&&(t=!1))}}this.renderer.setRenderTarget(s)}reset(e){if(e===void 0){let s=this.renderer.getSize(new H);this._pixelRatio=this.renderer.getPixelRatio(),this._width=s.width,this._height=s.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,s){this._width=e,this._height=s;let t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(t,i),this.renderTarget2.setSize(t,i);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var Gt=class extends ne{constructor(e,s,t=null,i=null,n=null){super(),this.scene=e,this.camera=s,this.overrideMaterial=t,this.clearColor=i,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Dt}render(e,s,t){let i=e.autoClear;e.autoClear=!1;let n,r;this.overrideMaterial!==null&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=r),e.autoClear=i}};var $t=class{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let s=0;s<256;s++)this.p[s]=Math.floor(e.random()*256);this.perm=[];for(let s=0;s<512;s++)this.perm[s]=this.p[s&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,s,t){return e[0]*s+e[1]*t}dot3(e,s,t,i){return e[0]*s+e[1]*t+e[2]*i}dot4(e,s,t,i,n){return e[0]*s+e[1]*t+e[2]*i+e[3]*n}noise(e,s){let t,i,n,r=.5*(Math.sqrt(3)-1),a=(e+s)*r,u=Math.floor(e+a),m=Math.floor(s+a),_=(3-Math.sqrt(3))/6,M=(u+m)*_,V=u-M,L=m-M,P=e-V,z=s-L,Y,K;P>z?(Y=1,K=0):(Y=0,K=1);let S=P-Y+_,D=z-K+_,T=P-1+2*_,N=z-1+2*_,O=u&255,U=m&255,$=this.perm[O+this.perm[U]]%12,k=this.perm[O+Y+this.perm[U+K]]%12,F=this.perm[O+1+this.perm[U+1]]%12,R=.5-P*P-z*z;R<0?t=0:(R*=R,t=R*R*this.dot(this.grad3[$],P,z));let A=.5-S*S-D*D;A<0?i=0:(A*=A,i=A*A*this.dot(this.grad3[k],S,D));let te=.5-T*T-N*N;return te<0?n=0:(te*=te,n=te*te*this.dot(this.grad3[F],T,N)),70*(t+i+n)}noise3d(e,s,t){let i,n,r,a,m=(e+s+t)*.3333333333333333,_=Math.floor(e+m),M=Math.floor(s+m),V=Math.floor(t+m),L=1/6,P=(_+M+V)*L,z=_-P,Y=M-P,K=V-P,S=e-z,D=s-Y,T=t-K,N,O,U,$,k,F;S>=D?D>=T?(N=1,O=0,U=0,$=1,k=1,F=0):S>=T?(N=1,O=0,U=0,$=1,k=0,F=1):(N=0,O=0,U=1,$=1,k=0,F=1):D<T?(N=0,O=0,U=1,$=0,k=1,F=1):S<T?(N=0,O=1,U=0,$=0,k=1,F=1):(N=0,O=1,U=0,$=1,k=1,F=0);let R=S-N+L,A=D-O+L,te=T-U+L,Be=S-$+2*L,Qe=D-k+2*L,Ze=T-F+2*L,Ye=S-1+3*L,Ke=D-1+3*L,W=T-1+3*L,ge=_&255,ve=M&255,_e=V&255,pt=this.perm[ge+this.perm[ve+this.perm[_e]]]%12,ft=this.perm[ge+N+this.perm[ve+O+this.perm[_e+U]]]%12,gt=this.perm[ge+$+this.perm[ve+k+this.perm[_e+F]]]%12,vt=this.perm[ge+1+this.perm[ve+1+this.perm[_e+1]]]%12,ae=.6-S*S-D*D-T*T;ae<0?i=0:(ae*=ae,i=ae*ae*this.dot3(this.grad3[pt],S,D,T));let le=.6-R*R-A*A-te*te;le<0?n=0:(le*=le,n=le*le*this.dot3(this.grad3[ft],R,A,te));let ce=.6-Be*Be-Qe*Qe-Ze*Ze;ce<0?r=0:(ce*=ce,r=ce*ce*this.dot3(this.grad3[gt],Be,Qe,Ze));let he=.6-Ye*Ye-Ke*Ke-W*W;return he<0?a=0:(he*=he,a=he*he*this.dot3(this.grad3[vt],Ye,Ke,W)),32*(i+n+r+a)}noise4d(e,s,t,i){let n=this.grad4,r=this.simplex,a=this.perm,u=(Math.sqrt(5)-1)/4,m=(5-Math.sqrt(5))/20,_,M,V,L,P,z=(e+s+t+i)*u,Y=Math.floor(e+z),K=Math.floor(s+z),S=Math.floor(t+z),D=Math.floor(i+z),T=(Y+K+S+D)*m,N=Y-T,O=K-T,U=S-T,$=D-T,k=e-N,F=s-O,R=t-U,A=i-$,te=k>F?32:0,Be=k>R?16:0,Qe=F>R?8:0,Ze=k>A?4:0,Ye=F>A?2:0,Ke=R>A?1:0,W=te+Be+Qe+Ze+Ye+Ke,ge=r[W][0]>=3?1:0,ve=r[W][1]>=3?1:0,_e=r[W][2]>=3?1:0,pt=r[W][3]>=3?1:0,ft=r[W][0]>=2?1:0,gt=r[W][1]>=2?1:0,vt=r[W][2]>=2?1:0,ae=r[W][3]>=2?1:0,le=r[W][0]>=1?1:0,ce=r[W][1]>=1?1:0,he=r[W][2]>=1?1:0,ki=r[W][3]>=1?1:0,Jt=k-ge+m,ei=F-ve+m,ti=R-_e+m,ii=A-pt+m,ni=k-ft+2*m,si=F-gt+2*m,ri=R-vt+2*m,oi=A-ae+2*m,ai=k-le+3*m,li=F-ce+3*m,ci=R-he+3*m,hi=A-ki+3*m,ui=k-1+4*m,mi=F-1+4*m,di=R-1+4*m,pi=A-1+4*m,Xe=Y&255,Ge=K&255,$e=S&255,Je=D&255,Rn=a[Xe+a[Ge+a[$e+a[Je]]]]%32,An=a[Xe+ge+a[Ge+ve+a[$e+_e+a[Je+pt]]]]%32,In=a[Xe+ft+a[Ge+gt+a[$e+vt+a[Je+ae]]]]%32,Ln=a[Xe+le+a[Ge+ce+a[$e+he+a[Je+ki]]]]%32,On=a[Xe+1+a[Ge+1+a[$e+1+a[Je+1]]]]%32,et=.6-k*k-F*F-R*R-A*A;et<0?_=0:(et*=et,_=et*et*this.dot4(n[Rn],k,F,R,A));let tt=.6-Jt*Jt-ei*ei-ti*ti-ii*ii;tt<0?M=0:(tt*=tt,M=tt*tt*this.dot4(n[An],Jt,ei,ti,ii));let it=.6-ni*ni-si*si-ri*ri-oi*oi;it<0?V=0:(it*=it,V=it*it*this.dot4(n[In],ni,si,ri,oi));let nt=.6-ai*ai-li*li-ci*ci-hi*hi;nt<0?L=0:(nt*=nt,L=nt*nt*this.dot4(n[Ln],ai,li,ci,hi));let st=.6-ui*ui-mi*mi-di*di-pi*pi;return st<0?P=0:(st*=st,P=st*st*this.dot4(n[On],ui,mi,di,pi)),27*(_+M+V+L+P)}};var ct={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new H},cameraProjectionMatrix:{value:new Ei},cameraInverseProjectionMatrix:{value:new Ei},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},ht={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},ut={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new H}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};var Dn=(()=>{class o extends ne{constructor(s,t,i,n,r=32){super(),this.width=i!==void 0?i:512,this.height=n!==void 0?n:512,this.clear=!0,this.needsSwap=!1,this.camera=t,this.scene=s,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(r),this.generateRandomKernelRotations();let a=new hn;a.format=tn,a.type=en,this.normalRenderTarget=new at(this.width,this.height,{minFilter:xi,magFilter:xi,type:ot,depthTexture:a}),this.ssaoRenderTarget=new at(this.width,this.height,{type:ot}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new me({defines:Object.assign({},ct.defines),uniforms:xe.clone(ct.uniforms),vertexShader:ct.vertexShader,fragmentShader:ct.fragmentShader,blending:oe}),this.ssaoMaterial.defines.KERNEL_SIZE=r,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new wn,this.normalMaterial.blending=oe,this.blurMaterial=new me({defines:Object.assign({},ut.defines),uniforms:xe.clone(ut.uniforms),vertexShader:ut.vertexShader,fragmentShader:ut.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new me({defines:Object.assign({},ht.defines),uniforms:xe.clone(ht.uniforms),vertexShader:ht.vertexShader,fragmentShader:ht.fragmentShader,blending:oe}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new me({uniforms:xe.clone(Oe.uniforms),vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:$i,blendDst:wi,blendEquation:_i,blendSrcAlpha:Gi,blendDstAlpha:wi,blendEquationAlpha:_i}),this.fsQuad=new je(null),this.originalClearColor=new Dt}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(s,t,i){switch(this.overrideVisibility(),this.renderOverride(s,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(s,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(s,this.blurMaterial,this.blurRenderTarget),this.output){case o.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=oe,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:i);break;case o.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=oe,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:i);break;case o.OUTPUT.Depth:this.renderPass(s,this.depthRenderMaterial,this.renderToScreen?null:i);break;case o.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=oe,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:i);break;case o.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Xi,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(s,t,i,n,r){s.getClearColor(this.originalClearColor);let a=s.getClearAlpha(),u=s.autoClear;s.setRenderTarget(i),s.autoClear=!1,n!=null&&(s.setClearColor(n),s.setClearAlpha(r||0),s.clear()),this.fsQuad.material=t,this.fsQuad.render(s),s.autoClear=u,s.setClearColor(this.originalClearColor),s.setClearAlpha(a)}renderOverride(s,t,i,n,r){s.getClearColor(this.originalClearColor);let a=s.getClearAlpha(),u=s.autoClear;s.setRenderTarget(i),s.autoClear=!1,n=t.clearColor||n,r=t.clearAlpha||r,n!=null&&(s.setClearColor(n),s.setClearAlpha(r||0),s.clear()),this.scene.overrideMaterial=t,s.render(this.scene,this.camera),this.scene.overrideMaterial=null,s.autoClear=u,s.setClearColor(this.originalClearColor),s.setClearAlpha(a)}setSize(s,t){this.width=s,this.height=t,this.ssaoRenderTarget.setSize(s,t),this.normalRenderTarget.setSize(s,t),this.blurRenderTarget.setSize(s,t),this.ssaoMaterial.uniforms.resolution.value.set(s,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(s,t)}generateSampleKernel(s){let t=this.kernel;for(let i=0;i<s;i++){let n=new G;n.x=Math.random()*2-1,n.y=Math.random()*2-1,n.z=Math.random(),n.normalize();let r=i/s;r=St.lerp(.1,1,r*r),n.multiplyScalar(r),t.push(n)}}generateRandomKernelRotations(){let i=new $t,n=4*4,r=new Float32Array(n);for(let a=0;a<n;a++){let u=Math.random()*2-1,m=Math.random()*2-1,_=0;r[a]=i.noise3d(u,m,_)}this.noiseTexture=new dn(r,4,4,nn,Ji),this.noiseTexture.wrapS=yi,this.noiseTexture.wrapT=yi,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let s=this.scene,t=this._visibilityCache;s.traverse(function(i){t.set(i,i.visible),(i.isPoints||i.isLine)&&(i.visible=!1)})}restoreVisibility(){let s=this.scene,t=this._visibilityCache;s.traverse(function(i){let n=t.get(i);i.visible=n}),t.clear()}}return o.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},o})();var ee=class{initThreeJS(e){let s=e.nativeElement.clientWidth,t=e.nativeElement.clientHeight;this.renderer=new un({antialias:!0}),this.renderer.setSize(s,t),e.nativeElement.appendChild(this.renderer.domElement),this.scene=new mn,this.camera=new an(75,s/t,.1,1e3),this.camera.position.z=5;let i=this.getPolyhedron(),n=new _n({color:16777215,wireframe:!1});this.geometry=new Mt(i,n),this.scene.add(this.geometry);let r=new Si(16764159,100,100);r.position.set(10,10,10),this.scene.add(r);let a=new Si(16777164,100,100);a.position.set(-10,-10,10),this.scene.add(a);let u=new yn(4210752);this.scene.add(u),this.controls=new Zt(this.camera,this.renderer.domElement),this.composer=new Xt(this.renderer);let m=new Gt(this.scene,this.camera);this.composer.addPass(m),this.ssaoPass=new Dn(this.scene,this.camera,s,t),this.ssaoPass.kernelRadius=16,this.composer.addPass(this.ssaoPass),this.animate()}animate(){requestAnimationFrame(()=>this.animate()),this.controls.update(),this.renderer.render(this.scene,this.camera)}resizeWindow(e){let s=e.nativeElement.clientWidth,t=e.nativeElement.clientHeight;this.camera.aspect=s/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,t),this.composer.setSize(s,t)}};var ns=["rendererContainer"],Ve=(()=>{let e=class e extends ee{ngOnInit(){this.initThreeJS(this.rendererContainer)}getPolyhedron(){return new vn}onWindowResize(){this.resizeWindow(this.rendererContainer)}};e.title="Tetrahedro regular",e.route="tetrahedron-viewer",e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275cmp=w({type:e,selectors:[["app-tetrahedron-viewer"]],viewQuery:function(i,n){if(i&1&&b(ns,7),i&2){let r;E(r=C())&&(n.rendererContainer=r.first)}},hostBindings:function(i,n){i&1&&d("resize",function(a){return n.onWindowResize(a)},!1,se)},standalone:!0,features:[re,y],decls:4,vars:0,consts:[["rendererContainer",""],[1,"renderer-container"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Tetrahedro Regular"),l(),g(2,"div",1,0))},styles:[".renderer-container[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;aspect-ratio:1 / 1}"]});let o=e;return o})();var ss=["rendererContainer"],ze=(()=>{let e=class e extends ee{ngOnInit(){this.initThreeJS(this.rendererContainer)}getPolyhedron(){return new on}onWindowResize(){this.resizeWindow(this.rendererContainer)}};e.title="Hexahedro regular",e.route="hexahedron-viewer",e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275cmp=w({type:e,selectors:[["app-hexahedron-viewer"]],viewQuery:function(i,n){if(i&1&&b(ss,7),i&2){let r;E(r=C())&&(n.rendererContainer=r.first)}},hostBindings:function(i,n){i&1&&d("resize",function(a){return n.onWindowResize(a)},!1,se)},standalone:!0,features:[re,y],decls:4,vars:0,consts:[["rendererContainer",""],[1,"renderer-container"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Hexahedro Regular"),l(),g(2,"div",1,0))},styles:[".renderer-container[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;aspect-ratio:1 / 1}"]});let o=e;return o})();var rs=["rendererContainer"],Ne=(()=>{let e=class e extends ee{ngOnInit(){this.initThreeJS(this.rendererContainer)}getPolyhedron(){return new gn}onWindowResize(){this.resizeWindow(this.rendererContainer)}};e.title="Octahedro regular",e.route="octahedron-viewer",e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275cmp=w({type:e,selectors:[["app-octahedron-viewer"]],viewQuery:function(i,n){if(i&1&&b(rs,7),i&2){let r;E(r=C())&&(n.rendererContainer=r.first)}},hostBindings:function(i,n){i&1&&d("resize",function(a){return n.onWindowResize(a)},!1,se)},standalone:!0,features:[re,y],decls:4,vars:0,consts:[["rendererContainer",""],[1,"renderer-container"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Octahedro Regular"),l(),g(2,"div",1,0))},styles:[".renderer-container[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;aspect-ratio:1 / 1}"]});let o=e;return o})();var os=["rendererContainer"],He=(()=>{let e=class e extends ee{ngOnInit(){this.initThreeJS(this.rendererContainer)}getPolyhedron(){return new pn}onWindowResize(){this.resizeWindow(this.rendererContainer)}};e.title="Dodecahedro Regular",e.route="dodecahedron-viewer",e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275cmp=w({type:e,selectors:[["app-dodecahedron-viewer"]],viewQuery:function(i,n){if(i&1&&b(os,7),i&2){let r;E(r=C())&&(n.rendererContainer=r.first)}},hostBindings:function(i,n){i&1&&d("resize",function(a){return n.onWindowResize(a)},!1,se)},standalone:!0,features:[re,y],decls:4,vars:0,consts:[["rendererContainer",""],[1,"renderer-container"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Dodecahedro Regular"),l(),g(2,"div",1,0))},styles:[".renderer-container[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;aspect-ratio:1 / 1}"]});let o=e;return o})();var as=["rendererContainer"],qe=(()=>{let e=class e extends ee{ngOnInit(){this.initThreeJS(this.rendererContainer)}getPolyhedron(){return new fn}onWindowResize(){this.resizeWindow(this.rendererContainer)}};e.title="Icosahedro regular",e.route="icosahedron-viewer",e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275cmp=w({type:e,selectors:[["app-icosahedron-viewer"]],viewQuery:function(i,n){if(i&1&&b(as,7),i&2){let r;E(r=C())&&(n.rendererContainer=r.first)}},hostBindings:function(i,n){i&1&&d("resize",function(a){return n.onWindowResize(a)},!1,se)},standalone:!0,features:[re,y],decls:4,vars:0,consts:[["rendererContainer",""],[1,"renderer-container"]],template:function(i,n){i&1&&(c(0,"h2"),h(1,"Icosahedro Regular"),l(),g(2,"div",1,0))},styles:[".renderer-container[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;aspect-ratio:1 / 1}"]});let o=e;return o})();var fe=(()=>{let e=class e{};e.title="Derivada Aritm\xE9tica",e.route="arithmetic-derivative",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-arithmetic-derivative-article"]],standalone:!0,features:[y],decls:11,vars:0,template:function(i,n){i&1&&(c(0,"h2"),h(1,"Derivada Aritm\xE9tica"),l(),c(2,"p"),h(3,"La derivada aritm\xE9tica es una funci\xF3n definida sobre los n\xFAmeros enteros, que se inspira en las reglas de derivaci\xF3n del c\xE1lculo cl\xE1sico, pero aplicada a la estructura aritm\xE9tica de los n\xFAmeros. Introducida por analog\xEDa con la derivada convencional, su objetivo es capturar propiedades relacionadas con la factorizaci\xF3n de los n\xFAmeros enteros en t\xE9rminos de sus factores primos."),l(),c(4,"p"),h(5,"La derivada aritm\xE9tica de un n\xFAmero primo pp se define como p\u2032=1. Para un n\xFAmero compuesto n=a\u22C5b, la derivada sigue una regla similar a la del producto en el c\xE1lculo diferencial: n\u2032=a\u2032\u22C5b+a\u22C5b\u2032. Por ejemplo, para un n\xFAmero como 6, que es el producto de 2 y 3, su derivada aritm\xE9tica ser\xEDa 6\u2032=2\u2032\u22C53+2\u22C53\u2032=1\u22C53+2\u22C51=5."),l(),c(6,"p"),h(7,"Esta funci\xF3n ofrece una nueva perspectiva sobre los n\xFAmeros, especialmente en la manera en que los primos y sus potencias se comportan bajo operaciones derivativas. La derivada aritm\xE9tica puede ser \xFAtil en ciertos problemas te\xF3ricos de la aritm\xE9tica y la teor\xEDa de n\xFAmeros, ya que revela informaci\xF3n sobre la factorizaci\xF3n de enteros."),l(),c(8,"p"),h(9,"A continuaci\xF3n, puedes calcular la derivada aritm\xE9tica del n\xFAmero que desees utilizando el componente interactivo que aparece abajo."),l(),g(10,"app-arithmetic-derivative"))},dependencies:[Ct]});let o=e;return o})();var ls=["canvas"],Ue=(()=>{let e=class e{constructor(){this.iterations=1e3,this.isDrawing=!1,this.sigma=10,this.rho=28,this.beta=8/3}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.drawLorenzAttractor()}ngOnDestroy(){this.isDrawing=!1}drawLorenzAttractor(){return ue(this,null,function*(){let t=this.canvas.nativeElement.width,i=this.canvas.nativeElement.height;this.ctx.clearRect(0,0,t,i),this.ctx.strokeStyle="#00FFFF",this.ctx.shadowColor="#00FFFF",this.ctx.shadowBlur=.5,this.ctx.lineWidth=.5;let n=.01,r=0,a=0,u=.01;this.isDrawing=!0,this.ctx.beginPath(),this.ctx.moveTo(t/2,i-50);for(let m=0;m<this.iterations&&this.isDrawing;m++){let _=this.sigma*(r-n)*u,M=(n*(this.rho-a)-r)*u,V=(n*r-this.beta*a)*u;n+=_,r+=M,a+=V;let L=t/2+n*10,P=i-50-a*10;this.ctx.lineTo(L,P),this.ctx.stroke(),m%100===0&&(yield this.sleep(1))}this.isDrawing=!1})}incrementIterations(){this.iterations+=1e3,this.isDrawing||this.drawLorenzAttractor()}decrementIterations(){this.iterations>1e3&&(this.iterations-=1e3,this.isDrawing||this.drawLorenzAttractor())}stopDrawing(){this.isDrawing=!1}sleep(t){return new Promise(i=>setTimeout(i,t))}};e.title="Atractor de Lorenz",e.route="lorenz-attractor",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-lorenz-attractor"]],viewQuery:function(i,n){if(i&1&&b(ls,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:11,vars:0,consts:[["canvas",""],[3,"click"],["width","800","height","600"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Atractor de Lorenz"),l(),c(2,"div")(3,"button",1),d("click",function(){return p(r),f(n.decrementIterations())}),h(4,"Decrementar Iteraciones"),l(),c(5,"button",1),d("click",function(){return p(r),f(n.incrementIterations())}),h(6,"Incrementar Iteraciones"),l(),c(7,"button",1),d("click",function(){return p(r),f(n.stopDrawing())}),h(8,"Detener Dibujo"),l()(),g(9,"canvas",2,0)}},styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;background-color:#000;display:block;margin-top:20px}button[_ngcontent-%COMP%]{margin:5px;padding:10px;background-color:#444;color:#fff;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#666}"]});let o=e;return o})();var cs=["canvas"],We=(()=>{let e=class e{constructor(){this.minX=-2.5,this.maxX=1.5,this.minY=-2,this.maxY=2,this.maxIterations=128,this.width=800,this.height=600,this.scale=8,this.centerX=-.5,this.centerY=0,this.isDrawing=!1}ngAfterViewInit(){this.drawMandelbrot()}drawMandelbrot(){return ue(this,null,function*(){let i=this.canvas.nativeElement.getContext("2d");if(!i)return;let n=i.createImageData(this.width,this.height),r=n.data,a=2**this.scale,u=1/a,m=1/a,_=this.centerX-this.width/(2*a),M=this.centerX+this.width/(2*a),V=this.centerY-this.height/(2*a),L=this.centerY+this.height/(2*a);this.isDrawing=!0;for(let P=0;P<this.width&&this.isDrawing;P++){for(let z=0;z<this.height;z++){let Y=_+P*u,K=V+z*m,S=Y,D=K,T=0;for(;T<this.maxIterations;){let U=S*S-D*D+Y;if(D=2*S*D+K,S=U,S*S+D*D>4)break;T++}let N=this.getColor(T),O=(P+z*this.width)*4;r[O+0]=N[0],r[O+1]=N[1],r[O+2]=N[2],r[O+3]=255}P%10===0&&(yield this.sleep(0),i.putImageData(n,0,0))}i.putImageData(n,0,0),this.isDrawing=!1})}getColor(t){if(t===this.maxIterations)return[0,0,0];let n=t/this.maxIterations*360;return this.hslToRgb(n,1,.5)}hslToRgb(t,i,n){let r=(1-Math.abs(2*n-1))*i,a=r*(1-Math.abs(t/60%2-1)),u=n-r/2,m=0,_=0,M=0;return t<60?(m=r,_=a):t<120?(m=a,_=r):t<180?(_=r,M=a):t<240?(_=a,M=r):t<300?(m=a,M=r):(m=r,M=a),[Math.round((m+u)*255),Math.round((_+u)*255),Math.round((M+u)*255)]}updateValues(){this.isDrawing?(this.isDrawing=!1,setTimeout(()=>this.drawMandelbrot(),100)):this.drawMandelbrot()}moveLeft(){this.centerX-=200/2**this.scale,this.updateValues()}moveRight(){this.centerX+=200/2**this.scale,this.updateValues()}moveUp(){this.centerY-=200/2**this.scale,this.updateValues()}moveDown(){this.centerY+=200/2**this.scale,this.updateValues()}zoomIn(){this.scale+=1,this.updateValues()}zoomOut(){this.scale-=1,this.updateValues()}incrementMaxIterations(){this.maxIterations*=2,this.updateValues()}decrementMaxIterations(){this.maxIterations/=2,this.updateValues()}sleep(t){return new Promise(i=>setTimeout(i,t))}};e.title="Conjunto de Mandelbrot",e.route="mandelbrot-set",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-mandelbrot"]],viewQuery:function(i,n){if(i&1&&b(cs,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:76,vars:6,consts:[["canvas",""],[1,"formula"],[1,"widget-container"],[1,"widget-title"],[1,"controls"],[3,"click"],[3,"width","height"],[1,"widget-label"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Conjunto de Mandelbrot"),l(),c(2,"p"),h(3,"El conjunto de Mandelbrot es uno de los fractales m\xE1s famosos y estudiados en matem\xE1ticas debido a su complejidad y belleza visual. Fue nombrado en honor al matem\xE1tico Beno\xEEt Mandelbrot, quien lo descubri\xF3 en 1980 mientras estudiaba geometr\xEDa fractal. Este conjunto es generado mediante una sencilla iteraci\xF3n de la f\xF3rmula matem\xE1tica "),c(4,"span",1),h(5,"z"),c(6,"sub"),h(7,"n+1"),l(),h(8," = z"),c(9,"sub"),h(10,"n"),l(),c(11,"sup"),h(12,"2"),l(),h(13," + c"),l(),h(14,", donde "),c(15,"span",1),h(16,"z"),l(),h(17," y "),c(18,"span",1),h(19,"c"),l(),h(20," son n\xFAmeros complejos. La idea b\xE1sica es aplicar repetidamente esta f\xF3rmula a cada punto del plano complejo para ver si el valor resultante tiende al infinito o permanece acotado. Los puntos que no divergen (permanecen acotados) forman el conjunto de Mandelbrot, mientras que los que divergen dan lugar a las coloridas y complejas estructuras que se observan en sus bordes."),l(),c(21,"p"),h(22,"Visualmente, el conjunto de Mandelbrot tiene una estructura autosemejante: al hacer zoom en sus bordes, se pueden ver r\xE9plicas de la figura principal y patrones extremadamente intrincados. Este comportamiento fractal refleja la riqueza matem\xE1tica de este conjunto."),l(),c(23,"p"),h(24,"Debajo de este art\xEDculo, encontrar\xE1s un componente interactivo donde puedes visualizar el conjunto de Mandelbrot. El componente te permite desplazarte por el plano complejo, hacer zoom para observar sus detalles y ajustar el n\xFAmero m\xE1ximo de iteraciones, lo que afectar\xE1 la precisi\xF3n y profundidad de la imagen generada."),l(),c(25,"div",2)(26,"div",3),h(27,"Conjunto de Mandelbrot"),l(),c(28,"div",4)(29,"table")(30,"tr"),g(31,"td"),c(32,"td")(33,"button",5),d("click",function(){return p(r),f(n.moveUp())}),h(34,"\u{1F869}"),l()(),g(35,"td"),c(36,"td")(37,"button",5),d("click",function(){return p(r),f(n.zoomIn())}),h(38,"\u2795"),l()()(),c(39,"tr")(40,"td")(41,"button",5),d("click",function(){return p(r),f(n.moveLeft())}),h(42,"\u{1F860}"),l()(),g(43,"td"),c(44,"td")(45,"button",5),d("click",function(){return p(r),f(n.moveRight())}),h(46,"\u{1F862}"),l()(),c(47,"td"),h(48,"zoom"),l()(),c(49,"tr"),g(50,"td"),c(51,"td")(52,"button",5),d("click",function(){return p(r),f(n.moveDown())}),h(53,"\u{1F863}"),l()(),g(54,"td"),c(55,"td")(56,"button",5),d("click",function(){return p(r),f(n.zoomOut())}),h(57,"\u2796"),l()()()(),c(58,"button",5),d("click",function(){return p(r),f(n.incrementMaxIterations())}),h(59,"Incrementar Iteraciones"),l(),c(60,"button",5),d("click",function(){return p(r),f(n.decrementMaxIterations())}),h(61,"Disminuir Iteraciones"),l()(),g(62,"canvas",6,0),c(64,"div")(65,"div",7),h(66),l()(),c(67,"div")(68,"div",7),h(69,"Escala: 2"),c(70,"sup"),h(71),l(),h(72," px/unidad"),l()(),c(73,"div")(74,"div",7),h(75),l()()()}i&2&&(v(62),X("width",n.width)("height",n.height),v(4),Ai("Centro: (",n.centerX,", ",n.centerY,")"),v(5),Ee(n.scale),v(4),ie("Max. iteraciones: ",n.maxIterations,""))}});let o=e;return o})();var Mn=(()=>{let e=class e extends Wt{constructor(){super(...arguments),this.map=[],this.fractals=[{name:Fe.title,route:Fe.route},{name:Re.title,route:Re.route},{name:Ae.title,route:Ae.route},{name:Le.title,route:Le.route},{name:We.title,route:We.route}],this.platonicSolids=[{name:Ve.title,route:Ve.route},{name:ze.title,route:ze.route},{name:Ne.title,route:Ne.route},{name:He.title,route:He.route},{name:qe.title,route:qe.route}],this.numericTheory=[{name:fe.title,route:fe.route}],this.others=[{name:pe.title,route:pe.route},{name:Ue.title,route:Ue.route}]}getNavbar(){let t=new Bt;return t.name="Art\xEDculos",t.subsections=[{name:"Mapa",items:this.map},{name:"Fractales",items:this.fractals},{name:"S\xF3lidos Plat\xF3nicos",items:this.platonicSolids},{name:"Teor\xEDa de N\xFAmeros",items:this.numericTheory},{name:"Otros",items:this.others}],t}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=J(e)))(n||e)}})(),e.\u0275prov=Fi({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var Tn=(o,e)=>e.name,us=o=>["/articles",o],ms=()=>["active"],ds=()=>({exact:!0});function ps(o,e){if(o&1&&(c(0,"li")(1,"a",2),h(2),l()()),o&2){let s=e.$implicit;v(),X("routerLink",Ii(4,us,s.route))("routerLinkActive",vi(6,ms))("routerLinkActiveOptions",vi(7,ds)),v(),Ee(s.name)}}function fs(o,e){if(o&1&&(c(0,"li")(1,"div",1),h(2),l(),c(3,"ul"),fi(4,ps,3,8,"li",null,Tn),l()()),o&2){let s=e.$implicit;v(2),Ee(s.name),v(2),gi(s.items)}}var Pn=(()=>{let e=class e{constructor(t){this.articlesProviderService=t,this.navbar=this.articlesProviderService.getNavbar()}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(Ri(Mn))},e.\u0275cmp=w({type:e,selectors:[["app-articles-navbar"]],standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"nav-items"],[1,"subsection"],[3,"routerLink","routerLinkActive","routerLinkActiveOptions"]],template:function(i,n){i&1&&(c(0,"h2"),h(1),l(),c(2,"div",0)(3,"ul"),fi(4,fs,6,1,"li",null,Tn),l()()),i&2&&(v(),Ee(n.navbar.name),v(3),gi(n.navbar.subsections))},dependencies:[Vi,zi],styles:[".nav-items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0 auto;padding:0}.nav-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-height:30px}.nav-items[_ngcontent-%COMP%]   .subsection[_ngcontent-%COMP%]{padding:5px 0;margin:5px 0;color:#000;font-weight:700}.nav-items[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:5px;margin:5px;text-decoration:none;min-width:100px;color:#000;font-weight:400}.nav-items[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#333;color:#fff}.nav-items[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff}@media only screen and (max-width: 600px){.nav-items[_ngcontent-%COMP%]   .subsection[_ngcontent-%COMP%]{padding:0;margin:0;color:#000;font-weight:700;font-size:x-small}.nav-items[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:x-small;padding:0;margin:0}}"]});let o=e;return o})();var kn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-articles-content"]],standalone:!0,features:[y],decls:5,vars:0,consts:[[1,"article-with-sidebar"],[1,"sidebar"],[1,"body-text"]],template:function(i,n){i&1&&(c(0,"div",0)(1,"div",1),g(2,"app-articles-navbar"),l(),c(3,"div",2),g(4,"router-outlet"),l()())},dependencies:[Pn,ji],styles:["h2[_ngcontent-%COMP%]{font-variant:small-caps}"]});let o=e;return o})();var gs=["canvas"],dt=(()=>{let e=class e{constructor(){this.width=800,this.height=800,this.maxDepth=5,this.radius1=200,this.radius2=150,this.radius3=100}ngAfterViewInit(){this.drawApollonianSieve()}drawApollonianSieve(){let i=this.canvas.nativeElement.getContext("2d");if(!i)return;i.clearRect(0,0,this.width,this.height);let n={x:this.width/2,y:this.height/2-150,r:this.radius1},r={x:this.width/2-200,y:this.height/2+100,r:this.radius2},a={x:this.width/2+200,y:this.height/2+100,r:this.radius3};this.drawCircle(i,n.x,n.y,n.r),this.drawCircle(i,r.x,r.y,r.r),this.drawCircle(i,a.x,a.y,a.r),this.generateApollonian(i,n,r,a,this.maxDepth)}drawCircle(t,i,n,r){t.beginPath(),t.arc(i,n,r,0,Math.PI*2),t.strokeStyle="black",t.stroke()}generateApollonian(t,i,n,r,a){if(a<=0)return;let u=this.calculateInnerCircle(i,n,r);this.drawCircle(t,u.x,u.y,u.r),this.generateApollonian(t,u,i,n,a-1),this.generateApollonian(t,u,n,r,a-1),this.generateApollonian(t,u,r,i,a-1)}calculateInnerCircle(t,i,n){let r=1/t.r,a=1/i.r,u=1/n.r,_=1/(r+a+u+2*Math.sqrt(r*a+a*u+u*r)),M=(r*t.x+a*i.x+u*n.x)/(r+a+u),V=(r*t.y+a*i.y+u*n.y)/(r+a+u);return{x:M,y:V,r:_}}update(){this.drawApollonianSieve()}};e.title="Tam\xEDz de Apolonio",e.route="apollonian-sieve",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=w({type:e,selectors:[["app-apollonian-sieve"]],viewQuery:function(i,n){if(i&1&&b(gs,7),i&2){let r;E(r=C())&&(n.canvas=r.first)}},standalone:!0,features:[y],decls:28,vars:7,consts:[["canvas",""],[1,"widget-container"],[1,"widget-title"],["for","depth"],["id","depth","type","number",3,"ngModelChange","input","ngModel"],["for","radius1"],["id","radius1","type","number",3,"ngModelChange","input","ngModel"],["for","radius2"],["id","radius2","type","number",3,"ngModelChange","input","ngModel"],["for","radius3"],["id","radius3","type","number",3,"ngModelChange","input","ngModel"],["for","maxDepth"],["id","maxDepth","type","number",3,"ngModelChange","input","ngModel"],[3,"width","height"]],template:function(i,n){if(i&1){let r=Q();c(0,"h2"),h(1,"Tam\xEDz de Apolonio"),l(),c(2,"div",1)(3,"div",2),h(4,"Helecho de Barnsley"),l(),c(5,"div")(6,"div")(7,"label",3),h(8,"Profundidad Recursiva:"),l(),c(9,"input",4),De("ngModelChange",function(u){return p(r),Se(n.maxDepth,u)||(n.maxDepth=u),f(u)}),d("input",function(){return p(r),f(n.update())}),l()(),c(10,"div")(11,"label",5),h(12,"Radio C\xEDrculo 1:"),l(),c(13,"input",6),De("ngModelChange",function(u){return p(r),Se(n.radius1,u)||(n.radius1=u),f(u)}),d("input",function(){return p(r),f(n.update())}),l()(),c(14,"div")(15,"label",7),h(16,"Radio C\xEDrculo 2:"),l(),c(17,"input",8),De("ngModelChange",function(u){return p(r),Se(n.radius2,u)||(n.radius2=u),f(u)}),d("input",function(){return p(r),f(n.update())}),l()(),c(18,"div")(19,"label",9),h(20,"Radio C\xEDrculo 3:"),l(),c(21,"input",10),De("ngModelChange",function(u){return p(r),Se(n.radius3,u)||(n.radius3=u),f(u)}),d("input",function(){return p(r),f(n.update())}),l()(),c(22,"div")(23,"label",11),h(24,"Profundidad Recursiva:"),l(),c(25,"input",12),De("ngModelChange",function(u){return p(r),Se(n.maxDepth,u)||(n.maxDepth=u),f(u)}),d("input",function(){return p(r),f(n.update())}),l()()(),g(26,"canvas",13,0),l()}i&2&&(v(9),Ce("ngModel",n.maxDepth),v(4),Ce("ngModel",n.radius1),v(4),Ce("ngModel",n.radius2),v(4),Ce("ngModel",n.radius3),v(4),Ce("ngModel",n.maxDepth),v(),X("width",n.width)("height",n.height))},dependencies:[xt,Ni,Ui,Hi,qi]});let o=e;return o})();var vs=[{path:"",component:kn,children:[{path:Fe.route,component:Fe},{path:Re.route,component:Re},{path:Ae.route,component:Ae},{path:Le.route,component:Le},{path:We.route,component:We},{path:dt.route,component:dt},{path:Ue.route,component:Ue},{path:He.route,component:He},{path:ze.route,component:ze},{path:qe.route,component:qe},{path:Ne.route,component:Ne},{path:Ve.route,component:Ve},{path:pe.route,component:pe},{path:fe.route,component:fe}]}],Fn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wt({type:e}),e.\u0275inj=_t({imports:[rt.forChild(vs),rt]});let o=e;return o})();var fl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wt({type:e}),e.\u0275inj=_t({imports:[Li,yt.forChild(),Ki,xt,rt,Fn,pe,dt,fe]});let o=e;return o})();export{fl as ArticlesModule};
